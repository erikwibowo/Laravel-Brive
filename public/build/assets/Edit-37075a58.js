import{aK as w,P as x,bm as $,f as u,a as t,w as f,o as g,b as i,t as m,u as r,F as C,aO as V,d as _,n as j,e as E,j as B,be as F}from"./app-9172825b.js";import{_ as d,a as N,b}from"./TextInput-5fb8cc21.js";import{_ as O,a as U}from"./SecondaryButton-d727c941.js";import{_ as D}from"./PrimaryButton-5538c6e6.js";import{_ as M}from"./Checkbox-752cfa95.js";const q={class:"space-y-6"},z=["onSubmit"],A={class:"text-lg font-medium text-slate-900 dark:text-slate-100"},K={class:"my-6 space-y-4"},L={class:"flex justify-start items-center space-x-2 mt-2"},P={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},T=["id","value"],G={class:"flex justify-end"},W={__name:"Edit",props:{show:Boolean,title:String,role:Object,permissions:Object},emits:["close"],setup(v,{emit:c}){const o=v,n=w({multipleSelect:!1}),e=x({name:"",permissions:[]}),h=()=>{var s;e.put(route("role.update",(s=o.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{c("close"),e.reset(),n.multipleSelect=!1},onError:()=>null,onFinish:()=>null})};$(()=>{var s,l,a;o.show&&(e.errors={},e.name=(s=o.role)==null?void 0:s.name,e.permissions=(l=o.role.permissions)==null?void 0:l.map(p=>p.id)),o.permissions.length==((a=o.role)==null?void 0:a.permissions.length)?n.multipleSelect=!0:n.multipleSelect=!1});const k=s=>{s.target.checked===!1?e.permissions=[]:(e.permissions=[],o.permissions.forEach(l=>{e.permissions.push(l.id)}))},y=()=>{o.permissions.length==e.permissions.length?n.multipleSelect=!0:n.multipleSelect=!1};return(s,l)=>(g(),u("section",q,[t(O,{show:o.show,onClose:l[4]||(l[4]=a=>c("close"))},{default:f(()=>[i("form",{class:"p-6",onSubmit:E(h,["prevent"])},[i("h2",A,m(s.lang().label.edit)+" "+m(o.title),1),i("div",K,[i("div",null,[t(d,{for:"name",value:s.lang().label.role},null,8,["value"]),t(N,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:r(e).name,"onUpdate:modelValue":l[0]||(l[0]=a=>r(e).name=a),required:"",placeholder:s.lang().placeholder.name,error:r(e).errors.name},null,8,["modelValue","placeholder","error"]),t(b,{class:"mt-2",message:r(e).errors.name},null,8,["message"])]),i("div",null,[t(d,{value:s.lang().label.permission},null,8,["value"]),t(b,{class:"mt-2",message:r(e).errors.permissions},null,8,["message"]),i("div",L,[t(M,{id:"permission-all",checked:n.multipleSelect,"onUpdate:checked":l[1]||(l[1]=a=>n.multipleSelect=a),onChange:k},null,8,["checked"]),t(d,{for:"permission-all",value:s.lang().label.check_all},null,8,["value"])]),i("div",P,[(g(!0),u(C,null,V(o.permissions,(a,p)=>(g(),u("div",{class:"flex items-center justify-start space-x-2",key:p},[B(i("input",{onChange:y,class:"rounded dark:bg-slate-900 border-slate-300 dark:border-slate-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-slate-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",id:"permission_"+a.id,value:a.id,"onUpdate:modelValue":l[2]||(l[2]=S=>r(e).permissions=S)},null,40,T),[[F,r(e).permissions]]),t(d,{for:"permission_"+a.id,value:a.name},null,8,["for","value"])]))),128))])])]),i("div",G,[t(U,{disabled:r(e).processing,onClick:l[3]||(l[3]=a=>c("close"))},{default:f(()=>[_(m(s.lang().button.close),1)]),_:1},8,["disabled"]),t(D,{class:j(["ml-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:h},{default:f(()=>[_(m(r(e).processing?s.lang().button.save+"...":s.lang().button.save),1)]),_:1},8,["class","disabled"])])],40,z)]),_:1},8,["show"])]))}};export{W as default};
